# üåê –î–æ—Å—Ç—É–ø –¥–æ WebSocket —Å–µ—Ä–≤–µ—Ä–∞ –∑ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é

## üìã –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

–í–∞—à WebSocket —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è –¥–æ—Å—Ç—É–ø—É –∑ —ñ–Ω—à–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ —É –º–µ—Ä–µ–∂—ñ.

### üîß –ó–º—ñ–Ω–∏, —è–∫—ñ –±—É–ª–∏ –≤–Ω–µ—Å–µ–Ω—ñ:

1. **WebSocket —Å–µ—Ä–≤–µ—Ä** (`websocket-server.php`):
   - –ó–º—ñ–Ω–µ–Ω–æ –∑ `localhost` –Ω–∞ `0.0.0.0` –¥–ª—è —Å–ª—É—Ö–∞–Ω–Ω—è –Ω–∞ –≤—Å—ñ—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
   - –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `--host` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–¥—Ä–µ—Å–∏

2. **Lando –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** (`.lando.yml`):
   - –î–æ–¥–∞–Ω–æ –ø–æ—Ä—Ç 8080 –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
   - –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ proxy –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É appserver

## üåç IP –∞–¥—Ä–µ—Å–∏ –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

–í–∞—à –∫–æ–º–ø'—é—Ç–µ—Ä –º–∞—î –Ω–∞—Å—Ç—É–ø–Ω—ñ IP –∞–¥—Ä–µ—Å–∏:
- **WiFi**: `192.168.31.36`
- **Docker bridges**: —Ä—ñ–∑–Ω—ñ 172.x.x.x –∞–¥—Ä–µ—Å–∏

### üì° URL –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:

```
ws://192.168.31.36:8080
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### 1. –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `test-external-websocket.html` —É –±—Ä–∞—É–∑–µ—Ä—ñ –Ω–∞ —Ü—å–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ.

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é

#### –í–∞—Ä—ñ–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
1. –ù–∞ —ñ–Ω—à–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://192.168.31.36:8080`
3. –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ WebSocket —Å–µ—Ä–≤–µ—Ä–∞

#### –í–∞—Ä—ñ–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ WebSocket –∫–ª—ñ—î–Ω—Ç
1. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª `test-external-websocket.html` –Ω–∞ —ñ–Ω—à–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –π–æ–≥–æ —É –±—Ä–∞—É–∑–µ—Ä—ñ
3. –í–≤–µ–¥—ñ—Ç—å URL: `ws://192.168.31.36:8080`
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è"

#### –í–∞—Ä—ñ–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫
```bash
# –¢–µ—Å—Ç HTTP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
curl http://192.168.31.36:8080

# –¢–µ—Å—Ç WebSocket (–ø–æ—Ç—Ä–µ–±—É—î —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤)
wscat -c ws://192.168.31.36:8080
```

## üîí –ë–µ–∑–ø–µ–∫–∞

### ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:
- –ü–æ—Ä—Ç 8080 —Ç–µ–ø–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–æ–≤–Ω—ñ—à–Ω—å–æ
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –£ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ HTTPS/WSS

### üõ°Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä–∞ (Ubuntu):
```bash
# –î–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—Ö—ñ–¥–Ω—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è –Ω–∞ –ø–æ—Ä—Ç 8080
sudo ufw allow 8080

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
sudo ufw status
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ WebSocket —Å–µ—Ä–≤–µ—Ä
lando websocket

# –ê–±–æ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
lando ssh -s appserver -c "php websocket-server.php --host=0.0.0.0 --port=8080"
```

## üì± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –º–æ–±—ñ–ª—å–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ —Ç—ñ—î—ó –∂ WiFi –º–µ—Ä–µ–∂—ñ
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://192.168.31.36:8080`
4. –ê–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ `test-external-websocket.html` —ñ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ `ws://192.168.31.36:8080`

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–∂—É –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –∑ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:**
1. –ß–∏ –∑–∞–ø—É—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä: `ps aux | grep websocket-server`
2. –ß–∏ —Å–ª—É—Ö–∞—î –ø–æ—Ä—Ç: `netstat -tlnp | grep 8080`
3. –ß–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä: `sudo ufw status`
4. –ß–∏ –≤ —Ç—ñ–π –∂–µ –º–µ—Ä–µ–∂—ñ: `ip addr show`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∞ "Connection refused"

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Lando: `lando restart`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—Ö–∞—î –Ω–∞ `0.0.0.0`: `netstat -tlnp | grep 8080`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä: `sudo ufw allow 8080`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∞ "Connection timeout"

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ IP –∞–¥—Ä–µ—Å—É: `ip addr show | grep "inet " | grep -v 127.0.0.1`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂–µ–≤–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏
3. –°–ø—Ä–æ–±—É–π—Ç–µ ping: `ping 192.168.31.36`

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ `lando logs` –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤ Lando
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂–µ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

---

**üéâ –¢–µ–ø–µ—Ä –≤–∞—à WebSocket —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ –±—É–¥—å-—è–∫–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–µ—Ä–µ–∂—ñ!** 